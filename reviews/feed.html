<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>OMJ · Reviews Feed</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.css" />
</head>
<body>
  <header>
    <h1>Open Management Journal — Public Reviews</h1>
    <p>Live feed of all reviews posted on GitHub</p>
  </header>

  <main>
    <div id="reviews">Loading reviews…</div>
  </main>

  <footer>
    <a href="../index.html">← Back to OMJ Home</a>
  </footer>

  <script>
    const container = document.getElementById('reviews');
    const repo = 'rsaylors/OMJ';
    fetch(`https://api.github.com/repos/${repo}/issues?state=open&labels=review&per_page=20`)
      .then(r => r.json())
      .then(data => {
        if (!data.length) {
          container.innerHTML = '<p>No reviews yet.</p>';
          return;
        }
        container.innerHTML = data.map(issue => `
          <article>
            <h3><a href="${issue.html_url}" target="_blank">${issue.title}</a></h3>
            <p>${issue.body ? issue.body.slice(0,300) + '...' : ''}</p>
          </article>
        `).join('');
      })
      .catch(err => {
        console.error(err);
        container.innerHTML = '<p>Could not load reviews feed.</p>';
      });
  </script>
</body>
</html>
